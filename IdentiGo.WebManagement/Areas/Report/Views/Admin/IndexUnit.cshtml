@model IdentiGo.Transversal.Model.CandidateReport
@using IdentiGo.Domain.Enums
@{
    ViewBag.Title = "Reporte Gerente de Zona";
}
@using (Html.BeginForm())
{
    <div class="row">
        <div class="col-sm-12">
            <h4 class="page-title">Nombramientos Gerente de Zona</h4>
            <ol class="breadcrumb">
                <li><a href="">Reportes</a></li>
                <li class="active"><a href="@Url.Action("Index")">Nombramientos Por Candidata</a></li>
            </ol>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">

            <div class="card-box table-responsive">
                <h4 class="m-t-0 header-title"><b>Empresaria/Gerente de Zona: @Html.DisplayFor(model => model.Name)</b></h4>
                @Html.HiddenFor(model => model.CodeUnit)
                <div class="form-group">
                    @Html.LabelFor(model => model.CodeCampaing)
                    @Html.DropDownListFor(m => m.CodeCampaing, (SelectList)ViewBag.CampaingList, "Todos", new { @class = "form-control" })
                </div>
                <div class="form-group text-right m-b-0">
                    <button class="btn btn-primary waves-effect waves-light" type="submit">
                        Consultar
                    </button>
                </div>
                <div class="row">
                    <div class="col-md-4">

                        <div class="card-box">
                            <h4 class="m-t-0 m-b-30 header-title"><b>Número de Nombramientos</b></h4>
                            <div id="TotalPie"></div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card-box">
                            <h4 class="m-t-0 m-b-30 header-title"><b>Consolidados de Estados</b></h4>
                            <div id="StatePie"></div>
                        </div>
                    </div>
                </div>

                <h4 class="m-t-0 header-title"><b>Registros</b></h4>
                <table id="datatable" class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>
                                Código de Candidata
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.ListNomination.FirstOrDefault().Document)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.ListNomination.FirstOrDefault().Name)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.ListNomination.FirstOrDefault().LastName)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.ListNomination.FirstOrDefault().StageProcess)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.ListNomination.FirstOrDefault().State)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.ListNomination.FirstOrDefault().StateDocument)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.ListNomination.FirstOrDefault().DateCreated)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.ListNomination.FirstOrDefault().DateNomination)
                            </th>
                            <th width="120">
                                Acciones
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.ListNomination)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.CodeUser)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Document)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Name)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.LastName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.StageProcess)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.State)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.StateDocument)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.DateCreated)
                                </td>
                                <td>
                                    @DateTime.Now
                                </td>
                                <td class="actions">
                                    <a href="@Url.Action("Details", new { id = item.Id })" class="on-default edit-row" title="Detalle"><i class="ion-android-note"></i></a>
                                    @*<a href="@Url.Action("Edit", new { id = item.Id })" class="on-default edit-row"><i class="fa fa-pencil"></i></a>
                                    <a href="@Url.Action("Delete", new { id = item.Id })" class="on-default" style="color:red"><i class="fa fa-trash-o"></i></a>*@
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

        </div>
    </div>
}
@section scripts
{
    <script>
        c3.generate({
            bindto: '#TotalPie',
            data: {
                columns: [
                    ['Total ', @Model.Total],
                ],
                type: 'pie',
                width: '165',
                height: '165',
            },
            color: {
                pattern: ["#f4f8fb"]
            },
            pie: {
                label: {
                    show: true,
                    format: function (value, ratio, id) {
                        return d3.format('')(value);
                    }
                }
            }
        });
        c3.generate({
            bindto: '#StatePie',
            data: {
                columns: [
                    ['Pendientes ', @Model.Pending],
                    ['Incumplen ', @Model.Invalid],
                    ['Aprobados ', @Model.Success]
                ],
                type: 'pie',
                width: '165',
                height: '165',
            },
            color: {
                pattern: ["#f4f8fb", "#5d9cec", "#5fbeaa"]
            },
            pie: {
                label: {
                    show: true,
                    format: function (value, ratio, id) {
                        return d3.format('')(value);
                    }
                }
            }
        });
    </script>
}